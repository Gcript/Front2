(()=>{function e(){const e=document.getElementById("diary"),t=document.getElementById("save-diary");e.disabled=!0,t.disabled=!0}document.getElementById("get-info").addEventListener("click",(async()=>{const t=document.getElementById("selected-date").value,n=document.getElementById("location").value;if(!t)return void alert("Please select a date!");const a=await async function(e,t){const n=await fetch(`https://api.weatherapi.com/v1/history.json?key=ec4ab57ddc68416c842115821241811&q=${e},South Korea&dt=${t}`),a=await n.json();if(a.error)return console.error("Weather data error:",a.error.message),null;const o=a.forecast.forecastday[0].day;return{temp:o.avgtemp_c,condition:o.condition.text}}(n,t),o=await async function(e){const t=new Date(e).toISOString(),n=new Date(new Date(e).setHours(23,59,59)).toISOString(),a=await fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin=${t}&timeMax=${n}&key=AIzaSyAkeGuuIMBBGl8vW093K-s2OC8MTpz9sy0`);return(await a.json()).items||[]}(t);!function(e){const t=document.getElementById("weather");e?t.innerHTML=`Temperature: ${e.temp}Â°C<br>Weather: ${e.condition}`:t.innerText="No weather data available for the selected date."}(a),function(e){e.length>0?console.log("Google Calendar Events:",e):console.log("No events found for the selected date.")}(o),function(e){const t=localStorage.getItem(`diary_${e}`);document.getElementById("diary").value=t||""}(t),e()})),document.getElementById("save-diary").addEventListener("click",(()=>{const t=document.getElementById("selected-date").value,n=document.getElementById("diary").value;if(!t)return void alert("Please select a date!");if(""===n.trim())return void alert("Diary cannot be empty!");localStorage.setItem(`diary_${t}`,n);const a=document.getElementById("saved-message");a.style.display="block",setTimeout((()=>a.style.display="none"),2e3),e()})),document.getElementById("edit-diary").addEventListener("click",(()=>{!function(){const e=document.getElementById("diary"),t=document.getElementById("save-diary");e.disabled=!1,t.disabled=!1}()}))})();